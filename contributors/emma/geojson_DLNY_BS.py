# BUffered 100m and Simplified 15.9% (~149 vertices)
geo_json_geometry = {
  "type": "Polygon",
  "coordinates": [
    [
      [
        -119.38238578553916,
        37.884327349276425
      ],
      [
        -119.3826079573178,
        37.88319404418649
      ],
      [
        -119.3821953594752,
        37.882743954544786
      ],
      [
        -119.38062125572934,
        37.88261609533553
      ],
      [
        -119.3800543281054,
        37.88294234474702
      ],
      [
        -119.37788448969357,
        37.883127600552406
      ],
      [
        -119.37677777011278,
        37.88285330668274
      ],
      [
        -119.37521207267649,
        37.88178276541943
      ],
      [
        -119.37316224303912,
        37.8814609328267
      ],
      [
        -119.37275089477322,
        37.88107729198622
      ],
      [
        -119.37048983883265,
        37.880393878166394
      ],
      [
        -119.36902778411054,
        37.88034982309539
      ],
      [
        -119.36810896264839,
        37.88072088441333
      ],
      [
        -119.36771257012792,
        37.88146093671417
      ],
      [
        -119.366442283601,
        37.88183199577991
      ],
      [
        -119.3656697996871,
        37.8831944394979
      ],
      [
        -119.36566978814814,
        37.883960937665265
      ],
      [
        -119.36433772432288,
        37.88451649519941
      ],
      [
        -119.3608601881262,
        37.88468840952559
      ],
      [
        -119.35965652923218,
        37.88539388583499
      ],
      [
        -119.35617680529059,
        37.885393887583376
      ],
      [
        -119.35474906649611,
        37.88607730208776
      ],
      [
        -119.3540586766686,
        37.88680516151625
      ],
      [
        -119.35373835611857,
        37.887851295683284
      ],
      [
        -119.35256568058328,
        37.88789389068505
      ],
      [
        -119.35141571541614,
        37.888299525742056
      ],
      [
        -119.35066971739914,
        37.8893055509389
      ],
      [
        -119.35066969258948,
        37.89095044994174
      ],
      [
        -119.35044748259958,
        37.892639271570864
      ],
      [
        -119.34949769954514,
        37.89377644904029
      ],
      [
        -119.34826793505259,
        37.89562761699476
      ],
      [
        -119.34260683968039,
        37.8956276259946
      ],
      [
        -119.34117675877542,
        37.89539389833984
      ],
      [
        -119.33986111058903,
        37.89575426105686
      ],
      [
        -119.33621795535255,
        37.89590541065928
      ],
      [
        -119.33541666112923,
        37.895627623762906
      ],
      [
        -119.33312120641703,
        37.89594945777404
      ],
      [
        -119.33199767652741,
        37.89655423303542
      ],
      [
        -119.33100297568188,
        37.89791627751341
      ],
      [
        -119.33039178930169,
        37.90011005533051
      ],
      [
        -119.32914423118305,
        37.901116266030215
      ],
      [
        -119.32808227137888,
        37.90163287270914
      ],
      [
        -119.32734925497788,
        37.902573562798395
      ],
      [
        -119.32669337467478,
        37.90274398371492
      ],
      [
        -119.3254473266455,
        37.90458294542657
      ],
      [
        -119.32461528836329,
        37.90534985502113
      ],
      [
        -119.32395449702524,
        37.905393908798175
      ],
      [
        -119.32267083662809,
        37.906183188732925
      ],
      [
        -119.32069445077782,
        37.90618318986982
      ],
      [
        -119.31986110217701,
        37.906460968206915
      ],
      [
        -119.3184722302518,
        37.90646096908305
      ],
      [
        -119.31671977741543,
        37.90710979451383
      ],
      [
        -119.31505309405289,
        37.90849868460895
      ],
      [
        -119.31430554492324,
        37.90951652764034
      ],
      [
        -119.31197109811201,
        37.909688435381035
      ],
      [
        -119.31088640587025,
        37.910443130685756
      ],
      [
        -119.30984122288163,
        37.911779775375095
      ],
      [
        -119.3086641534486,
        37.91294313217865
      ],
      [
        -119.30831069298077,
        37.91361635151617
      ],
      [
        -119.30711386050424,
        37.914582949546265
      ],
      [
        -119.30705823900388,
        37.915394980435934
      ],
      [
        -119.30650267053315,
        37.91624999505558
      ],
      [
        -119.30650264911209,
        37.91763888283511
      ],
      [
        -119.30678040096079,
        37.91930554939058
      ],
      [
        -119.30733592576395,
        37.92127166180465
      ],
      [
        -119.30705812281043,
        37.92291666127725
      ],
      [
        -119.30733588743779,
        37.92377165436813
      ],
      [
        -119.30705809322743,
        37.92483945389882
      ],
      [
        -119.3064417766743,
        37.925443133895385
      ],
      [
        -119.30544839221203,
        37.92701653547363
      ],
      [
        -119.30429495847719,
        37.92760561023603
      ],
      [
        -119.30208334476282,
        37.92757209311872
      ],
      [
        -119.30005285848614,
        37.9282209128895
      ],
      [
        -119.29850391960038,
        37.92979431798683
      ],
      [
        -119.29780425177357,
        37.92996622382541
      ],
      [
        -119.29655946005677,
        37.93090543331156
      ],
      [
        -119.2950264674687,
        37.931077335178784
      ],
      [
        -119.29461362184458,
        37.9315273959618
      ],
      [
        -119.29455797917828,
        37.932895037077536
      ],
      [
        -119.29400240244864,
        37.934283930515875
      ],
      [
        -119.29303254154277,
        37.935560938211296
      ],
      [
        -119.29211355407345,
        37.93624961970448
      ],
      [
        -119.29178013004073,
        37.93763888438757
      ],
      [
        -119.29178009144042,
        37.94013888238337
      ],
      [
        -119.2922749209156,
        37.94122351789801
      ],
      [
        -119.29442131380208,
        37.942494575007714
      ],
      [
        -119.29533044677713,
        37.94344574115533
      ],
      [
        -119.2984525735598,
        37.94516837495375
      ],
      [
        -119.29919298988978,
        37.946144880782
      ],
      [
        -119.2998611089577,
        37.946316792197784
      ],
      [
        -119.30128153065671,
        37.946039019256716
      ],
      [
        -119.30208332098763,
        37.946316793604964
      ],
      [
        -119.30402778921503,
        37.946316794835596
      ],
      [
        -119.30482958429629,
        37.94603901865549
      ],
      [
        -119.30655930209714,
        37.946039018800526
      ],
      [
        -119.30839873865754,
        37.94710607409796
      ],
      [
        -119.30965681622136,
        37.947106074874526
      ],
      [
        -119.31141207339442,
        37.94499456572682
      ],
      [
        -119.31252317064333,
        37.94416123799411
      ],
      [
        -119.31497365627037,
        37.94308933317632
      ],
      [
        -119.31733097396982,
        37.94069481938248
      ],
      [
        -119.31765922867822,
        37.93960900905906
      ],
      [
        -119.31876955297037,
        37.9382239525364
      ],
      [
        -119.3206628271336,
        37.93742791953561
      ],
      [
        -119.32205171107844,
        37.93715014456395
      ],
      [
        -119.32493455261712,
        37.936828306443225
      ],
      [
        -119.32744725743467,
        37.93594575328053
      ],
      [
        -119.3276643078213,
        37.935416662156776
      ],
      [
        -119.32766427875826,
        37.93349385120348
      ],
      [
        -119.32844056112849,
        37.93298347863031
      ],
      [
        -119.33108467156173,
        37.93170045361649
      ],
      [
        -119.33316275140156,
        37.92992792641463
      ],
      [
        -119.33411384849737,
        37.9295568674262
      ],
      [
        -119.33433087729723,
        37.92877164555598
      ],
      [
        -119.33594187486699,
        37.92541704579911
      ],
      [
        -119.33599748527779,
        37.92488276899656
      ],
      [
        -119.33780059554124,
        37.92305026764068
      ],
      [
        -119.33886236982231,
        37.92253379180477
      ],
      [
        -119.34038487939624,
        37.92131682278237
      ],
      [
        -119.34132337133886,
        37.92127276248087
      ],
      [
        -119.34275124288946,
        37.92058934952465
      ],
      [
        -119.34418942056551,
        37.919161405306426
      ],
      [
        -119.34719566169703,
        37.917533796522676
      ],
      [
        -119.34772481155885,
        37.91705687415562
      ],
      [
        -119.34905288364432,
        37.91402777260837
      ],
      [
        -119.34899725655048,
        37.91291627383025
      ],
      [
        -119.34752263558173,
        37.911949660015445
      ],
      [
        -119.34599726983042,
        37.91039495562847
      ],
      [
        -119.34571945859823,
        37.9082161555192
      ],
      [
        -119.34626162512532,
        37.90631682724755
      ],
      [
        -119.34927359265168,
        37.90520572110087
      ],
      [
        -119.35121803362992,
        37.90492794552138
      ],
      [
        -119.35378196121428,
        37.904927944280224
      ],
      [
        -119.35541665604156,
        37.90548349878411
      ],
      [
        -119.357083343063,
        37.90548349982499
      ],
      [
        -119.35878196135216,
        37.9052057289387
      ],
      [
        -119.36062114028596,
        37.905717219863625
      ],
      [
        -119.36263887996073,
        37.90603905877869
      ],
      [
        -119.36687885903102,
        37.90599500199622
      ],
      [
        -119.36775111834568,
        37.90558936374367
      ],
      [
        -119.36821942408812,
        37.904861106160126
      ],
      [
        -119.36816379507403,
        37.90319404763711
      ],
      [
        -119.36772464400092,
        37.90261243824743
      ],
      [
        -119.368219356117,
        37.900445518470384
      ],
      [
        -119.37010686752733,
        37.898816842201214
      ],
      [
        -119.37105792835331,
        37.8984457721777
      ],
      [
        -119.37127487140248,
        37.89767398976279
      ],
      [
        -119.37358438405015,
        37.89753381039862
      ],
      [
        -119.37427481737251,
        37.89680594325318
      ],
      [
        -119.37433040352549,
        37.8959939780824
      ],
      [
        -119.37515855157423,
        37.89488696669468
      ],
      [
        -119.37705254027792,
        37.892917054962545
      ],
      [
        -119.37709503962083,
        37.89103760080011
      ],
      [
        -119.37775099062522,
        37.89086714743604
      ],
      [
        -119.37883560304726,
        37.889834665293
      ],
      [
        -119.37933028764122,
        37.88821622536744
      ],
      [
        -119.38050223314731,
        37.88677911007864
      ],
      [
        -119.3821688797084,
        37.88511244457502
      ],
      [
        -119.38238578553916,
        37.884327349276425
      ]
    ]
  ]
}

# filter for items the overlap with our chosen geometry
geometry_filter = {
  "type": "GeometryFilter",
  "field_name": "geometry",
  "config": geo_json_geometry
}

# filter images acquired in a certain date range
date_range_filter = {
  "type": "DateRangeFilter",
  "field_name": "acquired",
  "config": {
    "gte": "2020-05-15T00:00:00.000Z",
    "lte": "2020-05-28T00:00:00.000Z"
  }
}

# filter any images which are more than 5% clouds
cloud_cover_filter = {
  "type": "RangeFilter",
  "field_name": "cloud_cover",
  "config": {
    "lte": 0.05
  }
}

# create a filter that combines our geo and date filters
# could also use an "OrFilter"
#domain = {
#  "type": "AndFilter",
#  "config": [geometry_filter, date_range_filter]
#}

# create a filter that combines our geo and date filters
# could also use an "OrFilter"
domain = {
  "type": "AndFilter",
  "config": [geometry_filter, date_range_filter, cloud_cover_filter]
}
